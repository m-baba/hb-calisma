hb={data:{}},hb.localStorage={storeName:"hbStore",init:function(){if(void 0!==localStorage[this.storeName])return hb.data=this.list();localStorage[this.storeName]=JSON.stringify(hb.data)},save:function(){return localStorage[this.storeName]=JSON.stringify(hb.data),!0},deleteObj:function(t,e){delete hb.data[t],this.save()},list:function(){return JSON.parse(localStorage[this.storeName])},order:function(t,e){var r=hb.storeToArray();return r=hb.sort(r,t),"Less"==e&&r.reverse(),hb.arrayToStore(r)},count:function(){return Object.keys(hb.data).length}},hb.localStorage.init();
hb.templateModal=function(a,i,t){return'        <div class="modal">            <div class="modal-overlay" id="js-modal-overlay"></div>            <div class="popup-confirm">                <div class="confirm-header">                    <span class="confirm-title">'+a+'</span>                    <a href="javascript:;" id="js-confirm-close" class="confirm-close"></a>                </div>                <div class="confirm-content">                    <p>'+i+'</p>                </div>                <div class="confirm-footer">                    <a href="javascript:;" dataid="'+t+'" id="js-btn-confirm" class="confirm-btn btn-confirm">EVET</a>                    <a href="javascript:;" id="js-btn-cancel" class="confirm-btn btn-cancel">HAYIR</a>                </div>            </div>        </div>    '},hb.templateMessage=function(a){return'        <div id="message" class="popup-message">            <p>'+a+"</p>        </div>    "},hb.templateAddLinkPage=function(){return'        <ul class="add-link-items">\t\t    <li class="add-link-item"><a href="javascript:;" class="return-to-list" id="btnList">Listeleme Sayfasına Dön</a></li>\t\t    <li class="add-link-item"><h1 class="add-link-title">Yeni link ekle</h1></li>\t\t    <li class="add-link-item"><label class="add-link-label">Link Adı</label><input type="text" class="add-link-input" placeholder="e.g. Alphabet" id="linkName"></li>\t\t    <li class="add-link-item"><label class="add-link-label">Link Url</label><input type="text" class="add-link-input" placeholder="e.g. http://abc.com" id="linkUrl"></li>\t\t    <li class="add-link-item"><input type="button" class="add-link-btn-save" id="btnSave" value="EKLE"></li>\t\t</ul>    '},hb.templateListPage=function(a,s,e){var n="",i=hb.storeToArray();return n+='<ul class="list-items">        <li class="list-item"><a href="javascript:;" id="addBtn" class="add-link">LİNK EKLE</a></li>        <li class="list-item">\t\t\t<select id="orderSelect" class="order-select">\t\t\t    <option value="">Order by</option>\t\t\t    <option value="Most" '+("Most"==a?"selected":"")+'>Most Voted ( Z-A )</option>\t\t\t    <option value="Less" '+("Less"==a?"selected":"")+">Less Voted ( A-Z )</option>\t\t\t</select>\t\t</li>    ",hb.pagination(i,hb.currentPage,function(a,i){for(var t in i)n+='                <li class="list-item list-item--link">                    <div class="point-wrapper">                        <ul class="point-items">                            <li><span class="point">'+e[t].point+'</span></li>                            <li><span class="point-text">PUAN</span></li>                        </ul>                    </div>                    <ul class="link-items">                        <li class="link-item"><span class="link-name">'+e[t].link+'</span></li>                        <li class="link-item"><span class="link-url">( '+e[t].url+' )</span></li>                        <li class="link-item">                            <a href="javascript:;" id="js-up-vote" dataid='+t+' class="up-vote">Artı Puan</a>                            <a href="javascript:;" id="js-down-vote" dataid='+t+' class="down-vote">Eksi Puan</a>                        </li>                    </ul>                    <a href="javascript:;" id="js-delete-link" dataid='+t+' class="delete-link"></a>                </li>            ';n+='            <li class="list-item">                <ul class="pagination-items">                    <li class="pagination-item"><a href="javascript:;" data-page-number="'+(parseInt(s)-1)+'" id="js-page-link" class="page-prev '+(1==parseInt(s)?"disabled":"")+'" id="js-page-prev"></a></li>        ';for(var l=1;l<=a;l++)n+='                <li class="pagination-item">\t\t\t\t    <a href="javascript:;" class="page-link '+(parseInt(s)==l?"active":"")+'" data-page-number="'+l+'" id="js-page-link">'+l+"</a>\t\t\t\t</li>            ";n+='                    <li class="pagination-item"><a href="javascript:;" data-page-number="'+(parseInt(s)+1)+'" id="js-page-link" class="page-next '+(parseInt(s)==parseInt(a)?"disabled":"")+'" id="js-page-next"></a></li>                </ul>            </li>        </ul>'}),n};
hb.addEvent=function(e,r,t){e.attachEvent?e.attachEvent("on"+r,t):e.addEventListener(r,t)},hb.live=function(n,e,o,r){hb.addEvent(r||document,e,function(e){for(var r,t=e.target||e.srcElement;t&&!(r=t.id==n);)t=t.parentElement;r&&o.call(t,e)})},hb.pagination=function(e,r,t){var n=n||hb.pageItemCount,o=e.length%hb.pageItemCount==0?e.length/n:e.length/n+1,a=(r-1)*n,h=e.slice(a).slice(0,n);t=t(o,h=hb.arrayToStore(h))||function(){}},hb.storeToArray=function(){var e=[];for(var r in hb.data)e.push(hb.data[r]);return e},hb.arrayToStore=function(e){for(var r={},t=0;t<e.length;t++)r[e[t].order]={},r[e[t].order]=e[t];return r},hb.sort=function(e,t){return e.sort(function(e,r){return e[t]>r[t]?-1:r[t]>e[t]?1:e[hb.secondarySortOrder]>r[hb.secondarySortOrder]?-1:r[hb.secondarySortOrder]>e[hb.secondarySortOrder]?1:void 0})},hb.removeElement=function(e){for(var r=document.getElementsByClassName(e);0<r.length;)r[0].parentNode.removeChild(r[0])};
hb.render={divContainer:document.getElementById("container"),containerHtml:"",list:function(){var t=this;hb.data=hb.localStorage.order(hb.filterType,hb.orderType),t.containerHtml="",t.containerHtml=hb.templateListPage(hb.orderType,hb.currentPage,hb.data),t.divContainer.innerHTML=t.containerHtml},insert:function(){this.containerHtml=hb.templateAddLinkPage(),this.divContainer.innerHTML=this.containerHtml}};
hb.filterType="order",hb.currentPage=1,hb.orderType="",hb.secondarySortOrder="voteTime",hb.pageItemCount=5,hb.modalElem=document.getElementById("modalWrapper"),hb.DomNames={upVoteBtn:"js-up-vote",downVoteBtn:"js-down-vote",deleteBtn:"js-delete-link",addBtn:"addBtn",listBtn:"btnList",orderSelect:"orderSelect",saveBtn:"btnSave",pagelink:"js-page-link",modalOverlay:"js-modal-overlay",confirmClose:"js-confirm-close",btnConfirm:"js-btn-confirm",btnCancel:"js-btn-cancel"},hb.DomEvents={CLICK:"click",CHANGE:"change",LOAD:"load"},hb.vote={upvote:function(e){10<=hb.data[e].point||(hb.data[e].point++,hb.data[e].voteTime=(new Date).getTime(),hb.localStorage.save())},downvote:function(e){hb.data[e].point<=0||(hb.data[e].point--,hb.data[e].voteTime=(new Date).getTime(),hb.localStorage.save())}},hb.live(hb.DomNames.upVoteBtn,hb.DomEvents.CLICK,function(){var e=this.getAttribute("dataid");hb.vote.upvote(e),hb.filterType="point",hb.render.list()}),hb.live(hb.DomNames.downVoteBtn,hb.DomEvents.CLICK,function(){var e=this.getAttribute("dataid");hb.vote.downvote(e),hb.filterType="point",hb.render.list()}),hb.live(hb.DomNames.deleteBtn,hb.DomEvents.CLICK,function(){var e=this.getAttribute("dataid"),t=hb.templateModal("Linki Sil","Linki silmek istiyormusunuz?",e);hb.modalElem.innerHTML=t}),hb.live(hb.DomNames.btnConfirm,hb.DomEvents.CLICK,function(){var e=this.getAttribute("dataid"),t=hb.templateMessage("Link Silindi");hb.removeElement("modal"),hb.modalElem.innerHTML=t,hb.localStorage.deleteObj(e),setTimeout(function(){hb.removeElement("popup-message")},2e3),hb.currentPage=1,hb.render.list()}),hb.live(hb.DomNames.addBtn,hb.DomEvents.CLICK,function(){hb.render.insert()}),hb.live(hb.DomNames.listBtn,hb.DomEvents.CLICK,function(){hb.render.list()}),hb.live(hb.DomNames.orderSelect,hb.DomEvents.CHANGE,function(){hb.orderType=this.value,hb.filterType="point",hb.render.list()}),hb.live(hb.DomNames.saveBtn,hb.DomEvents.CLICK,function(){var e=document.getElementById("linkName").value.trim(),t=document.getElementById("linkUrl").value.trim(),n=hb.templateMessage("Link Eklendi");if(""!=e&&""!=t){var o=(new Date).getTime();hb.data[o]={},hb.data[o].order=o,hb.data[o].link=e,hb.data[o].url=t,hb.data[o].point=0,hb.data[o].voteTime=o,hb.localStorage.save(),hb.modalElem.innerHTML=n,setTimeout(function(){hb.removeElement("popup-message")},2e3),hb.render.list()}}),hb.live(hb.DomNames.pagelink,hb.DomEvents.CLICK,function(){var e=this.getAttribute("data-page-number");document.getElementById(hb.DomNames.orderSelect).value;hb.currentPage=e,hb.render.list()}),hb.live(hb.DomNames.modalOverlay,hb.DomEvents.CLICK,function(){hb.removeElement("modal")}),hb.live(hb.DomNames.confirmClose,hb.DomEvents.CLICK,function(){hb.removeElement("modal")}),hb.live(hb.DomNames.btnCancel,hb.DomEvents.CLICK,function(){hb.removeElement("modal")}),window.addEventListener(hb.DomEvents.LOAD,hb.render.list());